document.addEventListener("DOMContentLoaded",function(){var n=document.getElementById("town-select"),e=document.getElementById("account-settings-town"),t={valueField:"id",labelField:"City",searchField:"City",create:function(e,t){var a=!1;if(Array.from(n.options).forEach(n=>{n.text.toLowerCase()===e.toLowerCase()&&(a=!0)}),a){t();return}fetch("https://xc2y-vol9-ivwv.n7d.xano.io/api:CFIFmuHv/locations",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({City:e})}).then(n=>n.json()).then(a=>{t({id:a.id,City:e});var i=new Option(e,a.id);n.add(i)}).catch(()=>{t()})},load:function(n){fetch("https://xc2y-vol9-ivwv.n7d.xano.io/api:CFIFmuHv/locations").then(n=>n.json()).then(e=>n(e)).catch(()=>n())},onChange:function(n){e.value=n;var t=new Event("input",{bubbles:!0});e.dispatchEvent(t);var a=new Event("change",{bubbles:!0});e.dispatchEvent(a)}};t.load(function(e){e.forEach(e=>{var t=new Option(e.City,e.id);n.add(t)}),n.addEventListener("change",function(){t.onChange(n.value)})}),e.addEventListener("input",function(){console.log("Hidden field value:",e.value)})});
